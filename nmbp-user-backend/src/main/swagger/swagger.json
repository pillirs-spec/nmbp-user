{
  "swagger": "2.0",
  "info": {
    "title": "nmbp-user-backend",
    "description": "User service for NMBP application. Handles user registration, login OTP generation and verification. Integrates with SMS gateway for OTP delivery. Uses Redis for OTP storage and management. Designed for high performance and security.",
    "version": "1.0.0"
  },
  "host": "localhost:7004",
  "basePath": "/",
  "tags": [
    {
      "name": "Users",
      "description": "User service health check"
    }
  ],
  "schemes": [
    "http"
  ],
  "securityDefinitions": {
    "Bearer": {
      "type": "apiKey",
      "name": "Authorization",
      "in": "header",
      "description": "JWT token obtained from the Auth service login endpoint"
    }
  },
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/api/v1/user/health": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Health Check",
        "description": "Verify that the User Backend service is running and responsive",
        "responses": {
          "default": {
            "description": ""
          }
        }
      }
    },
    "/api/v1/user/loginOtp": {
      "post": {
        "tags": [
          "Users"
        ],
        "summary": "Request Registration OTP",
        "description": "Generate and send a 6-digit OTP to the provided mobile number for registration. OTP is valid for 3 minutes. Returns a txnId to use in verify/resend operations.",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "full_name": {
                  "type": "string",
                  "example": "John Doe"
                },
                "age": {
                  "type": "number",
                  "example": 30
                },
                "gender": {
                  "type": "number",
                  "example": 1
                },
                "pincode": {
                  "type": "string",
                  "example": "560001"
                },
                "district": {
                  "type": "number",
                  "example": 1
                },
                "state": {
                  "type": "number",
                  "example": 1
                },
                "mobile_number": {
                  "type": "string",
                  "example": "8169104556"
                },
                "email": {
                  "type": "string",
                  "example": "pillirajesh@ymail.com"
                }
              }
            }
          }
        ],
        "responses": {
          "default": {
            "description": ""
          }
        }
      }
    },
    "/api/v1/user/resendOTP": {
      "post": {
        "tags": [
          "Users"
        ],
        "summary": "Resend Registration OTP",
        "description": "Resend OTP for registration. Old OTP is invalidated immediately. New OTP is valid for 3 minutes. Maximum 3 resend attempts allowed.",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "txnId": {
                  "type": "string",
                  "example": "uuid-string"
                }
              }
            }
          }
        ],
        "responses": {
          "default": {
            "description": ""
          }
        }
      }
    },
    "/api/v1/user/verifyOTP": {
      "post": {
        "tags": [
          "Users"
        ],
        "summary": "Verify Registration OTP",
        "description": "Verify the OTP sent to the mobile number. After successful verification, user will be created in the database and all session data will be deleted from Redis.",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "txnId": {
                  "type": "string",
                  "example": "uuid-string"
                },
                "otp": {
                  "type": "string",
                  "example": "123456"
                }
              }
            }
          }
        ],
        "responses": {
          "default": {
            "description": ""
          }
        }
      }
    }
  }
}